$(document).on('turbolinks:load', function() {
  var events = [];
  if (gon.events) {
    gon.events.forEach(function(event) {
      if (event.start && event.end) {
        // for debugging
        // console.log('start:',event.start,' end:',event.end);
        events.push({
          title: event.title,
          start: event.start,
          end: event.end
        })
      } else {
        // sometimes null start/end dates are input to the calendar
        // console.log('null start event detected');
      }
    })
  }
  $('#calendar').fullCalendar({
      header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay'
    },
    googleCalendarApiKey: "<%= ENV['GOOGLE_CLIENT_ID'] %>",
    events: events,
    selectable: true,
    selectHelper: true,
    editable: false
  });
});
